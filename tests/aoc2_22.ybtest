====[ source code ]====
def for['t] *> summap_acc(f: for['t] *> int, acc: int): int = {
  x: f
  | return: summap_acc(f, x + acc)
  | let return = x + acc
}

def for['t] *> summap(f: for['t] *> int) = summap_acc(f, 0)

def for[int] *> score = {
  opp: ~, ~, own: ~, ~
  let return = own - 0x57 + (own + 2 - opp if 0x41..0x43) % 3 * 3
}

export def *test = summap(score)
====[ binary 1 ]====
43 20 5a 0a
42 20 58 0a
41 20 59 0a
00 00 00 00
====[ output 1 ]====
15